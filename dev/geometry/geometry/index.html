<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Geometry · PlantGeom.jl</title><meta name="title" content="Geometry · PlantGeom.jl"/><meta property="og:title" content="Geometry · PlantGeom.jl"/><meta property="twitter:title" content="Geometry · PlantGeom.jl"/><meta name="description" content="Documentation for PlantGeom.jl."/><meta property="og:description" content="Documentation for PlantGeom.jl."/><meta property="twitter:description" content="Documentation for PlantGeom.jl."/><meta property="og:url" content="https://VEZY.github.io/PlantGeom.jl/geometry/geometry/"/><meta property="twitter:url" content="https://VEZY.github.io/PlantGeom.jl/geometry/geometry/"/><link rel="canonical" href="https://VEZY.github.io/PlantGeom.jl/geometry/geometry/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PlantGeom.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">2D diagrams</span><ul><li><a class="tocitem" href="../../plot_diagram/makie_diagram/">Makie.jl</a></li><li><a class="tocitem" href="../../plot_diagram/plots_diagram/">Plots.jl</a></li></ul></li><li><a class="tocitem" href="../../makie_3d/">3D recipes</a></li><li><span class="tocitem">Geometry</span><ul><li class="is-active"><a class="tocitem" href>Geometry</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Reference-Mesh-Design-Philosophy"><span>Reference Mesh Design Philosophy</span></a></li><li><a class="tocitem" href="#Geometry-Types"><span>Geometry Types</span></a></li><li><a class="tocitem" href="#Associating-Geometry-with-MTG-Components"><span>Associating Geometry with MTG Components</span></a></li><li><a class="tocitem" href="#Common-Operations"><span>Common Operations</span></a></li><li><a class="tocitem" href="#File-Formats"><span>File Formats</span></a></li><li><a class="tocitem" href="#Visualization"><span>Visualization</span></a></li></ul></li><li><a class="tocitem" href="../refmesh/">RefMesh</a></li><li><a class="tocitem" href="../mesh/">Mesh</a></li><li><a class="tocitem" href="../merging_geometry/">Merging meshes</a></li></ul></li><li><a class="tocitem" href="../../API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Geometry</a></li><li class="is-active"><a href>Geometry</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Geometry</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/VEZY/PlantGeom.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/VEZY/PlantGeom.jl/blob/main/docs/src/geometry/geometry.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Geometry-in-PlantGeom"><a class="docs-heading-anchor" href="#Geometry-in-PlantGeom">Geometry in PlantGeom</a><a id="Geometry-in-PlantGeom-1"></a><a class="docs-heading-anchor-permalink" href="#Geometry-in-PlantGeom" title="Permalink"></a></h1><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>PlantGeom.jl provides a comprehensive framework for handling 3D geometries in plant architecture models. Geometry representation is a fundamental aspect of plant modeling that enables visualization, spatial analysis, and computation of physical processes like light interception or gas exchange.</p><h2 id="Reference-Mesh-Design-Philosophy"><a class="docs-heading-anchor" href="#Reference-Mesh-Design-Philosophy">Reference Mesh Design Philosophy</a><a id="Reference-Mesh-Design-Philosophy-1"></a><a class="docs-heading-anchor-permalink" href="#Reference-Mesh-Design-Philosophy" title="Permalink"></a></h2><p>PlantGeom uses a memory-efficient approach based on a key biological observation: many plant organs of the same type (e.g., leaves on a tree) share a common shape that varies only in size, orientation, and position. Instead of storing complete mesh data for each organ, PlantGeom stores:</p><ol><li>A <strong>reference mesh</strong> that represents the canonical shape of the organ</li><li>A <strong>transformation matrix</strong> for each instance of the organ that scales, rotates, and positions it appropriately</li></ol><p>This approach significantly reduces memory usage and file sizes, especially for complex plant models with thousands of similar organs.</p><p>When an organ&#39;s shape cannot be easily represented by transforming a reference mesh (e.g., wheat leaves with complex curvature), PlantGeom can fall back to storing the complete mesh directly. In this case, the reference mesh becomes the specific mesh for that organ, and the transformation matrix is the identity (no transformation).</p><h2 id="Geometry-Types"><a class="docs-heading-anchor" href="#Geometry-Types">Geometry Types</a><a id="Geometry-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Geometry-Types" title="Permalink"></a></h2><p>In PlantGeom, plant geometries are primarily represented using mesh structures, which can be associated with different components of a plant&#39;s architecture stored in a Multi-scale Tree Graph (MTG).</p><p>The main geometry types include:</p><ol><li><strong>Geometry</strong>: A container type that holds different geometric representations</li><li><strong>RefMesh</strong>: A reference mesh that includes metadata and the actual mesh</li><li><strong>SimpleMesh</strong>: The underlying mesh data structure (from <a href="https://github.com/JuliaGeometry/Meshes.jl">Meshes.jl</a>)</li></ol><h2 id="Associating-Geometry-with-MTG-Components"><a class="docs-heading-anchor" href="#Associating-Geometry-with-MTG-Components">Associating Geometry with MTG Components</a><a id="Associating-Geometry-with-MTG-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Associating-Geometry-with-MTG-Components" title="Permalink"></a></h2><p>Geometry is typically associated with specific nodes in an MTG structure using the <code>:geometry</code> attribute:</p><pre><code class="language-julia hljs"># Set geometry for a node
node.geometry = Geometry(ref_mesh=some_ref_mesh)

# Check if a node has geometry
has_geometry = haskey(node, :geometry)

# Access the geometry
mesh = node.geometry.ref_mesh.mesh</code></pre><h2 id="Common-Operations"><a class="docs-heading-anchor" href="#Common-Operations">Common Operations</a><a id="Common-Operations-1"></a><a class="docs-heading-anchor-permalink" href="#Common-Operations" title="Permalink"></a></h2><p>PlantGeom.jl leverages the functionality of the <a href="https://github.com/JuliaGeometry/Meshes.jl">Meshes.jl</a> package for core mesh operations. This provides access to a wide range of geometric algorithms and data structures.</p><p>It also leverages Rotations.jl and TransformsBase.jl for rotations and other transformations, and for applying and reversing sequential transformation operations. The following operations are commonly performed on geometries:</p><ul><li><strong>Creating meshes</strong>: Functions for generating basic shapes or reading meshes from files, performed using <a href="https://github.com/JuliaGeometry/Meshes.jl">Meshes.jl</a>, or meshes can be created from other specialized software (<em>e.g.</em> Blender)</li><li><strong>Transforming meshes</strong>: Functions for scaling, rotating (see Rotations.jl and TransformsBase.jl), and translating meshes, again performed using the Meshes.jl package</li><li><strong>Merging meshes</strong>: Combining multiple meshes into a single mesh (e.g., merging leaf meshes into a single leaf mesh). PlantGeom provides <code>merge_children_geometry!</code> for that purpose</li><li><strong>Analyzing meshes</strong>: Computing properties like area, volume, or bounding boxes, which can be done using the Meshes.jl package</li></ul><h2 id="File-Formats"><a class="docs-heading-anchor" href="#File-Formats">File Formats</a><a id="File-Formats-1"></a><a class="docs-heading-anchor-permalink" href="#File-Formats" title="Permalink"></a></h2><p>PlantGeom can inport and export in the OPS and OPF formats. It can also read and write meshes to various common file formats using Meshes.jl, including:</p><ul><li><strong>OBJ</strong>: A common 3D geometry format</li><li><strong>PLY</strong>: Polygon File Format</li><li><strong>STL</strong>: Standard Triangle Language</li><li><strong>OPF</strong>: Open Plant Format (combines MTG structure and geometry)</li><li>...</li></ul><p>The OPF file format specifically leverages the reference mesh concept, storing only the unique reference meshes and the transformation matrices for each node with geometry. This approach significantly reduces file sizes compared to storing complete mesh data for each organ.</p><h2 id="Visualization"><a class="docs-heading-anchor" href="#Visualization">Visualization</a><a id="Visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Visualization" title="Permalink"></a></h2><p>Geometries in PlantGeom can be visualized using various Makie.jl backends. For example, we can visualize a plant&#39;s geometry using the following code:</p><pre><code class="language-julia hljs">using PlantGeom
using CairoMakie # Could be GLMakie (GPU) or WGLMakie (web) instead

# Load an MTG with geometry
mtg = read_opf(&quot;path/to/plant.opf&quot;)

# Visualize the geometry
fig = Figure()
ax = Axis3(fig[1, 1])
viz!(ax, mtg)
fig</code></pre><p>See the <a href="../../makie_3d/">3D recipes</a> section for more information on visualization options.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../makie_3d/">« 3D recipes</a><a class="docs-footer-nextpage" href="../refmesh/">RefMesh »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Saturday 5 April 2025 18:11">Saturday 5 April 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
